# Docker Compose environment: postgres profile
#
# Usage:
#   cd /path/to/cullarr
#   cp .env.compose.postgres.example .env.compose.postgres
#   edit secrets and DB credentials
#   docker compose --profile postgres --env-file .env.compose.postgres up --build -d
#
# Restart required after changing values in this file.

RAILS_ENV=production
PORT=3000
RAILS_MAX_THREADS=5
JOB_CONCURRENCY=1
RAILS_LOG_LEVEL=info

# Required in production mode.
# Generate with: bin/rails secret
SECRET_KEY_BASE=replace-with-a-long-random-secret

# Postgres service bootstrap credentials.
# Avoid defaults outside quick local testing.
POSTGRES_USER=cullarr_admin
POSTGRES_PASSWORD=replace-with-strong-password
POSTGRES_DB=postgres

# Cullarr production DB URLs (strict group, all required, all unique)
PRODUCTION_DATABASE_URL=postgresql://cullarr_app:replace_with_app_password@postgres:5432/cullarr_production
PRODUCTION_CACHE_DATABASE_URL=postgresql://cullarr_app:replace_with_app_password@postgres:5432/cullarr_cache_production
PRODUCTION_QUEUE_DATABASE_URL=postgresql://cullarr_app:replace_with_app_password@postgres:5432/cullarr_queue_production
PRODUCTION_CABLE_DATABASE_URL=postgresql://cullarr_app:replace_with_app_password@postgres:5432/cullarr_cable_production

# Delete mode gate (recommended: keep false).
CULLARR_DELETE_MODE_ENABLED=false
# CULLARR_DELETE_MODE_SECRET=replace-with-delete-mode-secret

# Active Record encryption keys (required in production).
# Generate with: bin/rails db:encryption:init
ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEYS=replace-with-primary-key
ACTIVE_RECORD_ENCRYPTION_DETERMINISTIC_KEY=replace-with-deterministic-key
ACTIVE_RECORD_ENCRYPTION_KEY_DERIVATION_SALT=replace-with-derivation-salt

# Optional integration URL allow policy.
# CULLARR_ALLOWED_INTEGRATION_HOSTS=sonarr.local,radarr.local,tautulli.local
# IP ranges use CIDR/IP range notation (example: 192.168.1.0/24).
# CULLARR_ALLOWED_INTEGRATION_NETWORK_RANGES=192.168.1.0/24,10.0.0.0/24
