# Local environment file for development.
#
# Usage:
#   cd /path/to/cullarr
#   cp .env.example .env
#
# IMPORTANT:
# - Restart app processes after changing environment variables.
# - For local dev, easiest restart is: stop and run `bin/dev` again.

# ------------------------------------------------------------
# Core runtime
# ------------------------------------------------------------
PORT=3000
RAILS_MAX_THREADS=5
JOB_CONCURRENCY=1

# Optional production-focused logging control.
# RAILS_LOG_LEVEL=info

# Advanced variable. Leave unset unless debugging startup behavior.
# DISABLE_SYNC_STARTUP_RECOVERY=1

# Advanced variables. Usually not needed in local development.
# SOLID_QUEUE_IN_PUMA=1
# PIDFILE=/tmp/puma.pid
# CI=1

# ------------------------------------------------------------
# Database mode (strict)
# ------------------------------------------------------------
# Default local mode: SQLite fallback, by leaving all DB URLs unset.
#
# If any URL in a group is set, all 4 URLs in that group are required.
# Configured URLs must be unique across all groups.
#
# DO NOT use blank assignments like `DATABASE_URL=`.

# Development group examples:
# DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_development
# CACHE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_cache_development
# QUEUE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_queue_development
# CABLE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_cable_development

# Test group examples:
# TEST_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_test
# TEST_CACHE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_cache_test
# TEST_QUEUE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_queue_test
# TEST_CABLE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_cable_test

# Production group examples:
# PRODUCTION_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_production
# PRODUCTION_CACHE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_cache_production
# PRODUCTION_QUEUE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_queue_production
# PRODUCTION_CABLE_DATABASE_URL=postgresql://cullarr_app:replace_me@127.0.0.1:5432/cullarr_cable_production

# ------------------------------------------------------------
# Deletion gate
# ------------------------------------------------------------
# Keep disabled unless you intentionally need deletion execution.
CULLARR_DELETE_MODE_ENABLED=false

# Secret used to validate delete unlock tokens.
# Required if delete mode is enabled.
# Example generation: openssl rand -hex 32
# CULLARR_DELETE_MODE_SECRET=replace-with-delete-mode-secret

# ------------------------------------------------------------
# Active Record encryption keys
# ------------------------------------------------------------
# Required in production. Recommended in all environments.
# Generate starter values with:
#   bin/rails db:encryption:init
#
# Key ring format for ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEYS:
# - comma-separated
# - oldest key first
# - newest active key last

# ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEYS=
# ACTIVE_RECORD_ENCRYPTION_DETERMINISTIC_KEY=
# ACTIVE_RECORD_ENCRYPTION_KEY_DERIVATION_SALT=

# ------------------------------------------------------------
# Integration URL safety policy
# ------------------------------------------------------------
# If both are unset: integration URL validation is permissive.
# If either is set: host must match host allowlist or allowed IP range.

# Host patterns (wildcards supported):
# CULLARR_ALLOWED_INTEGRATION_HOSTS=sonarr.local,radarr.local,tautulli.local
# CULLARR_ALLOWED_INTEGRATION_HOSTS=*.media.internal,sonarr-*,radarr-*

# Network ranges (CIDR/IP range notation):
# - 192.168.1.0/24 means 192.168.1.0 through 192.168.1.255
# - 10.0.0.0/16 means 10.0.0.0 through 10.0.255.255
# CULLARR_ALLOWED_INTEGRATION_NETWORK_RANGES=192.168.1.0/24,10.0.0.0/24

# Optional image proxy host policy override.
# CULLARR_IMAGE_PROXY_ALLOWED_HOSTS=image.tmdb.org,assets.example.com
